<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Impractical London Underground</title>
    <style>

        .node {
            fill: #ccc;
            stroke: #fff;
            stroke-width: 1px;
        }

        .link {
            stroke: #777;
            stroke-width: 2px;
        }

        .link.shortcut {
            stroke: #ddd;
            stroke-width: 2px;
        }

        .piccadilly {
            stroke: #000099;
        }

        .central {
            stroke: #E32017;
        }

        .northern {
            stroke: #000000;
        }

        .bakerloo {
            stroke: #996633;
        }

        .jubilee {
            stroke: #868F98;
        }

        .victoria {
            stroke: #0099CC;
        }

        .waterloo-and-city {
            stroke: #66CCCC
        }

        .district {
            stroke: #00782A;
        }
        .circle {
            stroke: #FFD300;
        }
        .hammersmith-and-city {
            stroke: #F3A9BB
        }
        .metropolitan {
            stroke: #9B0056;
        }
        .dlr {
            stroke: #00A4A7;
        }
        .overground {
            stroke: #EE7C0E
        }
    </style>
</head>
<body>
<script src='http://d3js.org/d3.v3.min.js'></script>
<script>

    // Define the dimensions of the visualization. We're using
    // a size that's convenient for displaying the graphic on
    // http://jsDataV.is

    var width = 1920,
            height = 1920;

    var col1 = width / 4;
    var col2 = width / 2;
    var col3 = (width / 4) * 3;

    // Here's were the code begins. We start off by creating an SVG
    // container to hold the visualization. We only need to specify
    // the dimensions for this container.

    var svg = d3.select('body').append('svg')
            .attr('width', width)
            .attr('height', height);

    // Before we do anything else, let's define the data for the visualization.

    var graph = {
        "nodes": [{name: "London Underground", fixed: true, x: col2, y: 50},
            {station: 1, name: "Holborn"},
            {station: 2, name: "Russell Square"},
            {station: 3, name: "Covent Garden"},
            {station: 4, name: "Chancery Lane"},
            {station: 5, name: "Tottenham Court Road", fixed: true, x: (width/2) + 75, y: (height/2) - 75},
            {station: 6, name: "Leicester Square", fixed: true, x: (width/2) + 75, y: (height/2) + 75},
            {station: 7, name: "Piccadilly Circus", fixed: true, x: (width/2) - 75, y: (height/2) + 75},
            {station: 8, name: "Oxford Circus", fixed: true, x: (width/2) - 75, y: (height/2) - 75},
            {station: 9, name: "Acton Central"},
            {station: 10, name: "Acton Town"},
            {station: 11, name: "Aldgate"},
            {station: 12, name: "Aldgate East"},
            {station: 13, name: "All Saints"},
            {station: 14, name: "Alperton"},
            {station: 15, name: "Amersham"},
            {station: 16, name: "Angel"},
            {station: 17, name: "Archway"},
            {station: 18, name: "Arnos Grove"},
            {station: 19, name: "Arsenal"},
            {station: 20, name: "Baker Street"},
            {station: 21, name: "Balham"},
            {station: 22, name: "Bank", fixed: true, x: (width/2) + (75*5), y: (height/2) - 75},
            {station: 23, name: "Barbican"},
            {station: 24, name: "Barking"},
            {station: 25, name: "Barkingside"},
            {station: 26, name: "Barons Court"},
            {station: 27, name: "Bayswater"},
            {station: 28, name: "Beckton"},
            {station: 29, name: "Beckton Park"},
            {station: 30, name: "Becontree"},
            {station: 31, name: "Belsize Park"},
            {station: 32, name: "Bermondsey"},
            {station: 33, name: "Bethnal Green"},
            {station: 34, name: "Blackfriars"},
            {station: 35, name: "Blackhorse Road"},
            {station: 36, name: "Blackwall"},
            {station: 37, name: "Bond Street"},
            {station: 38, name: "Borough"},
            {station: 39, name: "Boston Manor"},
            {station: 40, name: "Bounds Green"},
            {station: 41, name: "Prince Regent"},
            {station: 42, name: "Pudding Mill Lane"},
            {station: 43, name: "Putney Bridge"},
            {station: 44, name: "Queens Park"},
            {station: 45, name: "Queensbury"},
            {station: 46, name: "Queensway"},
            {station: 47, name: "Ravenscourt Park"},
            {station: 48, name: "Rayners Lane"},
            {station: 49, name: "Redbridge"},
            {station: 50, name: "Regent's Park"},
            {station: 51, name: "Richmond"},
            {station: 52, name: "Rickmansworth"},
            {station: 53, name: "Roding Valley"},
            {station: 54, name: "Finsbury Park"},
            {station: 55, name: "Fulham Broadway"},
            {station: 56, name: "Gallions Reach"},
            {station: 57, name: "Gants Hill"},
            {station: 58, name: "Gloucester Road"},
            {station: 59, name: "Golders Green"},
            {station: 60, name: "Goldhawk Road"},
            {station: 61, name: "Goodge Street"},
            {station: 62, name: "Gospel Oak"},
            {station: 63, name: "Grange Hill"},
            {station: 64, name: "Great Portland Street"},
            {station: 65, name: "Green Park"},
            {station: 66, name: "Greenford"},
            {station: 67, name: "Greenwich"},
            {station: 68, name: "Gunnersbury"},
            {station: 69, name: "King's Cross St Pancras", fixed: true, x: (width/2) + (75*3), y: (height/2) - (75*3)},
            {station: 70, name: "Vauxhall"},
            {station: 71, name: "Victoria"},
            {station: 72, name: "Walthamstow Central"},
            {station: 73, name: "Wanstead"},
            {station: 74, name: "Wapping"},
            {station: 75, name: "Warren Street", fixed: true, x: (width/2) + 75, y: (height/2) - (75*3)},
            {station: 76, name: "Warwick Avenue"},
            {station: 77, name: "Waterloo"},
            {station: 78, name: "Watford"},
            {station: 79, name: "Ruislip Manor"},
            {station: 80, name: "Seven Sisters"},
            {station: 81, name: "Shadwell"},
            {station: 82, name: "Shepherd's Bush"},
            {station: 83, name: "Shoreditch"},
            {station: 84, name: "Silvertown"},
            {station: 85, name: "Sloane Square"},
            {station: 86, name: "Snaresbrook"},
            {station: 87, name: "South Acton"},
            {station: 88, name: "South Ealing"},
            {station: 89, name: "South Harrow"},
            {station: 90, name: "South Kensington"},
            {station: 91, name: "South Kenton"},
            {station: 92, name: "South Quay"},
            {station: 93, name: "South Ruislip"},
            {station: 94, name: "South Wimbledon"},
            {station: 95, name: "South Woodford"},
            {station: 96, name: "Southfields"},
            {station: 97, name: "Southgate"},
            {station: 98, name: "Southwark"},
            {station: 99, name: "St. James's Park"},
            {station: 100, name: "St John's Wood"},
            {station: 101, name: "St Paul's"},
            {station: 102, name: "Stamford Brook"},
            {station: 103, name: "Old Street"},
            {station: 104, name: "Embankment"},
            {station: 105, name: "Epping"},
            {station: 106, name: "Euston"},
            {station: 107, name: "Euston Square"},
            {station: 108, name: "Chalk Farm"},
            {station: 109, name: "Charing Cross", fixed: true, x: (width/2) + 75, y: (height/2) + (75*2)},
            {station: 110, name: "West Kensington"},
            {station: 111, name: "West Ruislip"},
            {station: 112, name: "Westbourne Park"},
            {station: 113, name: "Westferry"},
            {station: 114, name: "Westminster"},
            {station: 115, name: "White City"},
            {station: 116, name: "Whitechapel"},
            {station: 117, name: "Willesden Green"},
            {station: 118, name: "Willesden Junction"},
            {station: 119, name: "Notting Hill Gate", fixed: true, x: (width/2) - (75*6), y: (height/2) - 75},
            {station: 120, name: "Oakwood"},
            {station: 121, name: "Osterley"},
            {station: 122, name: "Oval"},
            {station: 123, name: "Paddington"},
            {station: 124, name: "Park Royal"},
            {station: 125, name: "Parsons Green"},
            {station: 126, name: "Perivale"},
            {station: 127, name: "Pimlico"},
            {station: 128, name: "Leyton"},
            {station: 129, name: "Leytonstone"},
            {station: 130, name: "Limehouse"},
            {station: 131, name: "Liverpool Street"},
            {station: 132, name: "London Bridge"},
            {station: 133, name: "Loughton"},
            {station: 134, name: "Manor House"},
            {station: 135, name: "Mansion House"},
            {station: 136, name: "Marble Arch"},
            {station: 137, name: "Marylebone"},
            {station: 138, name: "Maida Vale"},
            {station: 139, name: "Mile End"},
            {station: 140, name: "Mill Hill East"},
            {station: 141, name: "Monument"},
            {station: 142, name: "Moor Park"},
            {station: 143, name: "Moorgate"},
            {station: 144, name: "Edgware"},
            {station: 145, name: "Edgware Road"},
            {station: 146, name: "Elephant And Castle"},
            {station: 147, name: "Kennington"},
            {station: 148, name: "Kensal Green"},
            {station: 149, name: "Kensal Rise"},
            {station: 150, name: "Kensington (Olympia)"},
            {station: 151, name: "Kentish Town"},
            {station: 152, name: "Kentish Town West"},
            {station: 153, name: "Ruislip"},
            {station: 154, name: "Ruislip Gardens"},
            {station: 155, name: "Stanmore"},
            {station: 156, name: "Stepney Green"},
            {station: 157, name: "Stockwell"},
            {station: 158, name: "Stonebridge Park"},
            {station: 159, name: "Bow Church"},
            {station: 160, name: "Bow Road"},
            {station: 161, name: "Brent Cross"},
            {station: 162, name: "Brixton"},
            {station: 163, name: "Bromley-by-Bow"},
            {station: 164, name: "Brondesbury"},
            {station: 165, name: "Brondesbury Park"},
            {station: 166, name: "Buckhurst Hill"},
            {station: 167, name: "Burnt Oak"},
            {station: 168, name: "Caledonian Road"},
            {station: 169, name: "Caledonian Road & Barnsbury"},
            {station: 160, name: "Camden Road"},
            {station: 171, name: "Camden Town"},
            {station: 172, name: "Canada Water"},
            {station: 173, name: "Canary Wharf"},
            {station: 174, name: "Canning Town"},
            {station: 175, name: "Cannon Street"},
            {station: 176, name: "Canonbury"},
            {station: 177, name: "Canons Park"},
            {station: 178, name: "Chalfont & Latimer"},
            {station: 179, name: "Stratford"},
            {station: 180, name: "Sudbury Hill"},
            {station: 181, name: "Sudbury Town"},
            {station: 182, name: "Surrey Quays"},
            {station: 183, name: "Swiss Cottage"},
            {station: 184, name: "Temple"},
            {station: 185, name: "Theydon Bois"},
            {station: 186, name: "Tooting Bec"},
            {station: 187, name: "Tooting Broadway"},
            {station: 188, name: "Tottenham Hale"},
            {station: 189, name: "Totteridge And Whetstone"},
            {station: 190, name: "Tower Gateway"},
            {station: 191, name: "Tower Hill"},
            {station: 192, name: "Tufnell Park"},
            {station: 193, name: "Turnham Green"},
            {station: 194, name: "Turnpike Lane"},
            {station: 195, name: "Elverson Road"},
            {station: 196, name: "Fairlop"},
            {station: 197, name: "Farringdon"},
            {station: 198, name: "Finchley"},
            {station: 199, name: "Finchley Road"},
            {station: 200, name: "Finchley Road And Frognal"},
            {station: 201, name: "Hackney Central"},
            {station: 202, name: "Hackney Wick"},
            {station: 203, name: "Hainault"},
            {station: 204, name: "Hammersmith"},
            {station: 205, name: "Hampstead Heath"},
            {station: 206, name: "Hampstead"},
            {station: 207, name: "Hanger Lane"},
            {station: 208, name: "Harlesden"},
            {station: 209, name: "Heron Quays"},
            {station: 210, name: "High Barnet"},
            {station: 211, name: "High Street Kensington"},
            {station: 212, name: "Highbury & Islington"},
            {station: 213, name: "Highgate"},
            {station: 214, name: "Hillingdon"},
            {station: 215, name: "Holland Park"},
            {station: 216, name: "Holloway Road"},
            {station: 217, name: "Kilburn"},
            {station: 218, name: "Kilburn Park"},
            {station: 219, name: "Kingsbury"},
            {station: 220, name: "Knightsbridge"},
            {station: 221, name: "Ladbroke Grove"},
            {station: 222, name: "Lambeth North"},
            {station: 223, name: "Lancaster Gate"},
            {station: 224, name: "Latimer Road"},
            {station: 225, name: "Lewisham"},
            {station: 226, name: "Morden"},
            {station: 227, name: "Mornington Crescent"},
            {station: 228, name: "Clapham Common"},
            {station: 229, name: "Clapham North"},
            {station: 230, name: "Clapham South"},
            {station: 231, name: "Dalston Kingsland"},
            {station: 232, name: "Dalston Junction"},
            {station: 233, name: "Ealing Broadway"},
            {station: 234, name: "Ealing Common"},
            {station: 235, name: "Earls Court"},
            {station: 236, name: "East Acton"},
            {station: 237, name: "East Finchley"},
            {station: 238, name: "Homerton"},
            {station: 239, name: "Hyde Park Corner"},
            {station: 240, name: "North Acton"},
            {station: 241, name: "North Ealing"},
            {station: 242, name: "West Acton"},
            {station: 243, name: "Chesham"},
            {station: 244, name: "Chigwell"},
            {station: 245, name: "Chiswick Park"},
            {station: 246, name: "Chorleywood"},
            {station: 247, name: "Cockfosters"},
            {station: 248, name: "Colindale"},
            {station: 249, name: "Colliers Wood"},
            {station: 250, name: "Crossharbour And London Arena"},
            {station: 251, name: "Croxley"},
            {station: 252, name: "Custom House for ExCel"},
            {station: 253, name: "Cutty Sark"},
            {station: 254, name: "Cyprus"},
            {station: 255, name: "Dagenham East"},
            {station: 256, name: "Dagenham Heathway"},
            {station: 257, name: "Debden"},
            {station: 258, name: "Debtford Bridge"},
            {station: 259, name: "Devons Road"},
            {station: 260, name: "Dollis Hill"},
            {station: 261, name: "East Ham"},
            {station: 262, name: "East India"},
            {station: 263, name: "East Putney"},
            {station: 264, name: "Eastcote"},
            {station: 265, name: "Elm Park"},
            {station: 266, name: "Harrow And Wealdstone"},
            {station: 267, name: "Harrow on-the-Hill"},
            {station: 268, name: "Hatton Cross"},
            {station: 269, name: "Heathrow Terminal 4"},
            {station: 270, name: "Heathrow Terminals 1,2,3"},
            {station: 271, name: "Hendon Central"},
            {station: 272, name: "Hornchurch"},
            {station: 273, name: "Hounslow Central"},
            {station: 274, name: "Hounslow East"},
            {station: 275, name: "Hounslow West"},
            {station: 276, name: "Ickenham"},
            {station: 277, name: "Island Gardens"},
            {station: 278, name: "Kenton"},
            {station: 279, name: "Kew Gardens"},
            {station: 260, name: "Mudchute"},
            {station: 281, name: "Neasden"},
            {station: 282, name: "New Cross Gate"},
            {station: 283, name: "New Cross"},
            {station: 284, name: "Newbury Park"},
            {station: 285, name: "North Greenwich"},
            {station: 286, name: "North Harrow"},
            {station: 287, name: "North Wembley"},
            {station: 288, name: "North Woolwich"},
            {station: 289, name: "Northfields"},
            {station: 290, name: "Northolt"},
            {station: 291, name: "Northwick Park"},
            {station: 292, name: "Northwood"},
            {station: 293, name: "Northwood Hills"},
            {station: 294, name: "Pinner"},
            {station: 295, name: "Plaistow"},
            {station: 296, name: "Poplar"},
            {station: 297, name: "Preston Road"},
            {station: 298, name: "Rotherhithe"},
            {station: 299, name: "Royal Albert"},
            {station: 300, name: "Royal Oak"},
            {station: 301, name: "Royal Victoria"},
            {station: 302, name: "Upminster"},
            {station: 303, name: "Upminster Bridge"},
            {station: 304, name: "Upney"},
            {station: 305, name: "Upton Park"},
            {station: 306, name: "Uxbridge"},
            {station: 307, name: "Wembley Central"},
            {station: 308, name: "Wembley Park"},
            {station: 309, name: "West Brompton"},
            {station: 310, name: "West Finchley"},
            {station: 311, name: "West Ham"},
            {station: 312, name: "West Hampstead"},
            {station: 313, name: "West Harrow"},
            {station: 314, name: "West India Quay"},
            {station: 315, name: "Wimbledon"},
            {station: 316, name: "Wimbledon Park"},
            {station: 317, name: "Wood Green"},
            {station: 318, name: "Woodford"},
            {station: 319, name: "Woodside Park"},
            {station: 320, name: ""},
            {station: 321, name: ""},
            {station: 322, name: ""},
            {station: 323, name: ""},
            {station: 324, name: ""},
            {station: 325, name: ""},
            {station: 326, name: ""},
            {station: 327, name: ""},
            {station: 328, name: ""},
            {station: 329, name: ""},
        ],
        "links": [
            {"source": 1, "target": 2, line: "piccadilly"},
            {"source": 1, "target": 3, line: "piccadilly"},
            {"source": 1, "target": 4, line: "central"},
            {"source": 1, "target": 5, line: "central"},
            {"source": 3, "target": 6, line: "piccadilly"},
            {"source": 5, "target": 6, line: "northern"},
            {"source": 6, "target": 7, line: "piccadilly"},
            {"source": 5, "target": 8, line: "central"},
            {"source": 8, "target": 37, line: "central"},
            {"source": 20, "target": 37, line: "jubilee"},
            {"source": 8, "target": 50, line: "bakerloo"},
            {"source": 20, "target": 50, line: "bakerloo"},
            {"source": 65, "target": 7, line: "piccadilly"},
            {"source": 65, "target": 37, line: "jubilee"},
            {"source": 7, "target": 8, line: "bakerloo"},
            {"source": 65, "target": 8, line: "victoria"},
            {"source": 61, "target": 75, line: "northern"},
            {"source": 61, "target": 5, line: "northern"},
            {"source": 75, "target": 8, line: "victoria", shortcut: true},
            {"source": 4, "target": 101, line: "central"},
            {"source": 101, "target": 22, line: "central"},
            {"source": 22, "target": 143, line: "northern"},
            {"source": 143, "target": 103, line: "northern"},
            {"source": 103, "target": 16, line: "northern"},
            {"source": 16, "target": 69, line: "northern"},
            {"source": 69, "target": 106, line: "northern"},
            {"source": 75, "target": 106, line: "northern"},
            {"source": 2, "target": 69, line: "piccadilly"},
            {"source": 109, "target": 7, line: "bakerloo"},
            {"source": 109, "target": 6, line: "northern"},
            {"source": 109, "target": 77, line: "bakerloo"},
            {"source": 109, "target": 104, line: "northern"},
            {"source": 104, "target": 77, line: "northern"},
            {"source": 77, "target": 98, line: "jubilee"},
            {"source": 114, "target": 77, line: "jubilee"},
            {"source": 65, "target": 114, line: "jubilee"},
            {"source": 77, "target": 22, line: "waterloo-and-city", shortcut:true},
            {"source": 123, "target": 76, line: "bakerloo"},
            {"source": 127, "target": 71, line: "victoria"},
            {"source": 85, "target": 71, line: "district"},
            {"source": 85, "target": 71, line: "circle"},
            {"source": 86, "target": 95, line: "central"},
            {"source": 129, "target": 86, line: "central"},
            {"source": 26, "target": 110, line: "district"},
            {"source": 22, "target": 131, line: "central"},
            {"source": 131, "target": 33, line: "central"},
            {"source": 33, "target": 139, line: "central"},
            {"source": 98, "target": 132, line: "jubilee"},
            {"source": 132, "target": 22, line: "northern"},
            {"source": 38, "target": 132, line: "northern"},
            {"source": 146, "target": 38, line: "northern"},
            {"source": 147, "target": 146, line: "northern"},
            {"source": 77, "target": 147, line: "northern"},
            {"source": 65, "target": 71, line: "victoria"},
            {"source": 122, "target": 147, line: "northern"},
            {"source": 122, "target": 157, line: "northern"},
            {"source": 127, "target": 70, line: "victoria"},
            {"source": 70, "target": 157, line: "victoria"},
            {"source": 71, "target": 99, line: "circle"},
            {"source": 71, "target": 99, line: "district"},
            {"source": 99, "target": 114, line: "district"},
            {"source": 99, "target": 114, line: "circle"},
            {"source": 39, "target": 121, line: "piccadilly"},
            {"source": 137, "target": 20, line: "bakerloo"},
            {"source": 145, "target": 137, line: "bakerloo"},
            {"source": 123, "target": 145, line: "bakerloo"},
            {"source": 171, "target": 106, line: "northern"},
            {"source": 88, "target": 10, line: "piccadilly"},
            {"source": 134, "target": 54, line: "piccadilly"},
            {"source": 151, "target": 171, line: "northern"},
            {"source": 171, "target": 108, line: "northern"},
            {"source": 168, "target": 69, line: "piccadilly"},
            {"source": 114, "target": 104, line: "circle"},
            {"source": 114, "target": 104, line: "district"},
            {"source": 184, "target": 104, line: "district"},
            {"source": 184, "target": 104, line: "circle"},
            {"source": 184, "target": 135, line: "circle"},
            {"source": 184, "target": 135, line: "district"},
            {"source": 175, "target": 135, line: "district"},
            {"source": 175, "target": 135, line: "circle"},
            {"source": 175, "target": 141, line: "circle"},
            {"source": 175, "target": 141, line: "district"},
            {"source": 141, "target": 22, line: "joined"},
            {"source": 191, "target": 141, line: "district"},
            {"source": 191, "target": 141, line: "circle"},
            {"source": 191, "target": 11, line: "circle"},
            {"source": 191, "target": 12, line: "district"},
            {"source": 11, "target": 131, line: "circle"},
            {"source": 11, "target": 131, line: "metropolitan"},
            {"source": 143, "target": 131, line: "metropolitan"},
            {"source": 143, "target": 131, line: "circle"},
            {"source": 143, "target": 131, line: "hammersmith-and-city"},
            {"source": 143, "target": 23, line: "metropolitan"},
            {"source": 143, "target": 23, line: "circle"},
            {"source": 143, "target": 23, line: "hammersmith-and-city"},
            {"source": 197, "target": 23, line: "metropolitan"},
            {"source": 197, "target": 23, line: "circle"},
            {"source": 197, "target": 23, line: "hammersmith-and-city"},
            {"source": 197, "target": 69, line: "metropolitan"},
            {"source": 197, "target": 69, line: "circle"},
            {"source": 197, "target": 69, line: "hammersmith-and-city"},
            {"source": 107, "target": 69, line: "metropolitan"},
            {"source": 107, "target": 69, line: "circle"},
            {"source": 107, "target": 69, line: "hammersmith-and-city"},
            {"source": 107, "target": 64, line: "metropolitan"},
            {"source": 107, "target": 64, line: "circle"},
            {"source": 107, "target": 64, line: "hammersmith-and-city"},
            {"source": 20, "target": 64, line: "metropolitan"},
            {"source": 20, "target": 64, line: "circle"},
            {"source": 20, "target": 64, line: "hammersmith-and-city"},
            {"source": 136, "target": 37, line: "central"},
            {"source": 85, "target": 90, line: "circle"},
            {"source": 85, "target": 90, line: "district"},
            {"source": 58, "target": 90, line: "circle"},
            {"source": 58, "target": 90, line: "piccadilly"},
            {"source": 58, "target": 211, line: "circle"},
            {"source": 211, "target": 119, line: "district"},
            {"source": 211, "target": 119, line: "circle"},
            {"source": 119, "target": 46, line: "central"},
            {"source": 223, "target": 46, line: "central"},
            {"source": 223, "target": 136, line: "central"},
            {"source": 119, "target": 27, line: "circle"},
            {"source": 119, "target": 27, line: "district"},
            {"source": 123, "target": 27, line: "district"},
            {"source": 123, "target": 27, line: "circle"},
            {"source": 162, "target": 157, line: "victoria"},
            {"source": 102, "target": 193, line: "district"},
            {"source": 151, "target": 192, line: "northern"},
            {"source": 161, "target": 59, line: "northern"},
            {"source": 192, "target": 17, line: "northern"},
            {"source": 108, "target": 31, line: "northern"},
            {"source": 9, "target": 87, line: "overground"},
            {"source": 168, "target": 216, line: "piccadilly"},
            {"source": 216, "target": 19, line: "piccadilly"},
            {"source": 54, "target": 19, line: "piccadilly"},
            {"source": 100, "target": 20, line: "jubilee"},
            {"source": 100, "target": 183, line: "jubilee"},
            {"source": 119, "target": 215, line: "central"},
            {"source": 139, "target": 179, line: "central"},
            {"source": 128, "target": 179, line: "central"},
            {"source": 128, "target": 129, line: "central"},
            {"source": 59, "target": 206, line: "northern"},
            {"source": 31, "target": 206, line: "northern"},
            {"source": 77, "target": 222, line: "bakerloo"},
            {"source": 146, "target": 222, line: "bakerloo"},
            {"source": 183, "target": 199, line: "jubilee"},
            {"source": 20, "target": 199, line: "metropolitan", shortcut: true},
            {"source": 35, "target": 72, line: "victoria"},
            {"source": 35, "target": 188, line: "victoria"},
            {"source": 80, "target": 188, line: "victoria"},
            {"source": 80, "target": 54, line: "victoria"},
            {"source": 212, "target": 54, line: "victoria"},
            {"source": 212, "target": 69, line: "victoria", shortcut: true},
            {"source": 212, "target": 176, line: "overground"},
            {"source": 231, "target": 176, line: "overground"},
            {"source": 231, "target": 201, line: "overground"},
            {"source": 238, "target": 201, line: "overground"},
            {"source": 238, "target": 202, line: "overground"},
            {"source": 179, "target": 202, line: "overground"},
            {"source": 134, "target": 194, line: "piccadilly"},
            {"source": 65, "target": 239, line: "piccadilly"},
            {"source": 239, "target": 220, line: "piccadilly"},
            {"source": 58, "target": 220, line: "piccadilly"},
            {"source": 82, "target": 215, line: "central"},
            {"source": 82, "target": 115, line: "central"},
            {"source": 236, "target": 115, line: "central"},
            {"source": 236, "target": 240, line: "central"},
            {"source": 242, "target": 240, line: "central"},
            {"source": 242, "target": 233, line: "central"},
            {"source": 240, "target": 207, line: "central"},
            {"source": 126, "target": 207, line: "central"},
            {"source": 76, "target": 138, line: "bakerloo"},
            {"source": 138, "target": 218, line: "bakerloo"},
            {"source": 44, "target": 218, line: "bakerloo"},
            {"source": 44, "target": 148, line: "bakerloo"},
            {"source": 118, "target": 148, line: "bakerloo"},
            {"source": 118, "target": 208, line: "bakerloo"},
            {"source": 158, "target": 208, line: "bakerloo"},
            {"source": 235, "target": 90, line: "district"},
            {"source": 235, "target": 211, line: "district"},
            {"source": 235, "target": 110, line: "district"},
            {"source": 26, "target": 204, line: "piccadilly"},
            {"source": 26, "target": 204, line: "district"},
            {"source": 26, "target": 58, line: "piccadilly", shortcut:true},
            {"source": 10, "target": 234, line: "piccadilly"},
            {"source": 10, "target": 234, line: "district"},
            {"source": 233, "target": 234, line: "district"},
            {"source": 241, "target": 234, line: "piccadilly"},
            {"source": 10, "target": 193, line: "piccadilly"},
            {"source": 204, "target": 193, line: "piccadilly"},
            {"source": 308, "target": 199, line: "metropolitan"},
            {"source": 308, "target": 297, line: "metropolitan"},
            {"source": 291, "target": 297, line: "metropolitan"},
            {"source": 291, "target": 267, line: "metropolitan"},
            {"source": 313, "target": 267, line: "metropolitan"},
            {"source": 313, "target": 48, line: "metropolitan"},
            {"source": 89, "target": 48, line: "piccadilly"},
            {"source": 89, "target": 180, line: "piccadilly"},
            {"source": 89, "target": 181, line: "piccadilly"},
            {"source": 14, "target": 181, line: "piccadilly"},
            {"source": 14, "target": 124, line: "piccadilly"},
            {"source": 241, "target": 124, line: "piccadilly"},
            {"source": 241, "target": 124, line: "piccadilly"},
            {"source": 289, "target": 88, line: "piccadilly"},
            {"source": 289, "target": 39, line: "piccadilly"},
            {"source": 158, "target": 307, line: "bakerloo"},
            {"source": 287, "target": 307, line: "bakerloo"},
            {"source": 287, "target": 91, line: "bakerloo"},
            {"source": 278, "target": 91, line: "bakerloo"},
            {"source": 278, "target": 266, line: "bakerloo"},
        ]
    };


    // Extract the nodes and links from the data.
    var nodes = graph.nodes,
            links = graph.links;

    // Now we create a force layout object and define its properties.
    // Those include the dimensions of the visualization and the arrays
    // of nodes and links.

    var force = d3.layout.force()
            .size([width, height])
            .nodes(nodes)
            .links(links);

    // There's one more property of the layout we need to define,
    // its `linkDistance`. That's generally a configurable value and,
    // for a simple example, we'd normally leave it at its default.
    // Unfortunately, the default value results in a visualization
    // that's not especially clear. This parameter defines the
    // distance (normally in pixels) that we'd like to have between
    // nodes that are connected. (It is, thus, the length we'd
    // like our links to have.)

    //force.linkDistance(width / 30);
    force.charge(-400);
    force.theta(0.2);
    force.linkStrength(function (link) {
        if (link.shortcut)  return 0;
        if(link.line === "joined") return 1;
        return 0.8;
    });

    // Next we'll add the nodes and links to the visualization.
    // Note that we're just sticking them into the SVG container
    // at this point. We start with the links. The order here is
    // important because we want the nodes to appear "on top of"
    // the links. SVG doesn't really have a convenient equivalent
    // to HTML's `z-index`; instead it relies on the order of the
    // elements in the markup. By adding the nodes _after_ the
    // links we ensure that nodes appear on top of links.

    // Links are pretty simple. They're just SVG lines, and
    // we're not even going to specify their coordinates. (We'll
    // let the force layout take care of that.) Without any
    // coordinates, the lines won't even be visible, but the
    // markup will be sitting inside the SVG container ready
    // and waiting for the force layout.

    var link = svg.selectAll('.link')
            .data(links)
            .enter().append('line')
            .attr('class', 'link');

    // Now it's the nodes turn. Each node is drawn as a circle.

    // Create the groups under svg
    var gnodes = svg.selectAll('g.gnode')
            .data(graph.nodes)
            .enter()
            .append('g')
            .classed('gnode', true).call(force.drag);

    // Add one circle in each group
    var node = gnodes.append("circle")
            .attr("class", "node")
            .attr("r", 5);

    // Append the labels to each group
    var labels = gnodes.append("text").attr("style", "font-family: Arial; font-size: 10; ")

            .text(function (d) {
                if (d.name) return d.station + " " + d.name;
                var label = "";
                if (label.length === 0) label += d.station;
                return label;
            });


    // We're about to tell the force layout to start its
    // calculations. We do, however, want to know when those
    // calculations are complete, so before we kick things off
    // we'll define a function that we want the layout to call
    // once the calculations are done.

    force.on('tick', function () {

        // When this function executes, the force layout
        // calculations have concluded. The layout will
        // have set various properties in our nodes and
        // links objects that we can use to position them
        // within the SVG container.

        // First let's reposition the nodes. As the force
        // layout runs it updates the `x` and `y` properties
        // that define where the node should be centered.
        // To move the node, we set the appropriate SVG
        // attributes to their new values. Also give the
        // nodes a non-zero radius so they're visible.

        link.attr("x1", function (d) {
            return d.source.x;
        })
                .attr("y1", function (d) {
                    return d.source.y;
                })
                .attr("x2", function (d) {

                    return d.target.x;
                })
                .attr("y2", function (d) {
                    return d.target.y;
                })
                .attr("class", function (d) {
                    return "link " + d.line;
                });

        // Translate the groups
        gnodes.attr("transform", function (d) {
            return 'translate(' + [d.x, d.y] + ')';
        });


    });

    force.on('end', function () {
        graph.nodes.forEach(function(node) {
            node.fixed = false;
        })

        force.start();
    });

        // Okay, everything is set up now so it's time to turn
    // things over to the force layout. Here we go.

    force.start();

    // By the time you've read this far in the code, the force
    // layout has probably finished its work.

</script>
</body>
</html>
